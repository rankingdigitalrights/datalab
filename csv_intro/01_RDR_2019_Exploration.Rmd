---
title: "Introductionary Tasks for Gaby"
output: html_notebook
---

# Task 2

In order to get familiar with RDR's publicly available data, to introduce you to RMarkdown and R Notebooks, and test a GitHub-based way to collaborate, we have created this Notebook with some data-related tasks.

For R-specific guidance see

+ [R for Data Science](https://r4ds.had.co.nz/) by Hadley Wickham & Garrett Grolemund
+ [Happy Git and GitHub for the useR](https://happygitwithr.com/) by Jenny Bryan
+ [Fundamentals of Data Visualization](https://serialmentor.com/dataviz/) by Claus Wilke
+ [Data Visualization. A practical introduction](https://socviz.co/) by Kieran Healy


# Data

+ [2019 Excel + CSV files](https://rankingdigitalrights.org/index2019/download/)
+ [2018 Excel + CSV files](https://rankingdigitalrights.org/index2018/download/)

# Tasks

## Validate the 2019 summary scores CSV

### 2019 summary scores overview

> Filename: `RDR2019_01_Quick_Overview.csv`

#### Read in the 2019 summary scores quick overview

```{r}
# ## Pulling in data sets for the overview
RDR_Overview <- read.csv("c:/Users/gaby.walton/Desktop/CSV_Data/RDR2019_01_Quick_Overview.csv")

```

#### Calculate the total scores from the category scores
The total score is not simply an average of the governance, freedom, and privacy score. Instead the subcategories of these three categories are all equally weighted. Thus since governance has 6 subcategories, freedom 11, and privacy 18, the averages need to be multiplied by the number of subcategories and then added together and finally divided by 35 (the total number of subcategories).

The scores found here are a little off from the ones in the original data.

```{r}
## reading in the scores as vectors (one for each category)
company_governance <- RDR_Overview[[4]]
company_freedom <- RDR_Overview[[5]]
company_privacy <- RDR_Overview[[6]]

## calculating the total scores
# the sub categories aren't weighted and thus G=6,F=11, P=18
## R arrays don't start at 0

##print(company_governance[1])

company_total <- array(dim=24) ## creating array for totals to be stored

for(i in 1:24) {
  company_total[i] <-company_governance[i]*6+company_freedom[i]*11
  company_total[i]<- company_total[i]+company_privacy[i]*18
  company_total[i] <- company_total[i]/35
  ##print(company_total[i])
  
}

round(company_total,2)
```


#### Compare the distributions of the scoring categories

You can see the distributions of the scoring categories in the box plot below. Governance has the greatest range, but all four have similar medians.

```{r}
library(ggplot2)

governance <- data.frame(group="governance", value=company_governance)
freedom <- data.frame(group="freedom", value=company_freedom)
privacy <- data.frame(group="privacy", value=company_privacy)
total <- data.frame(group="total", value = company_total)
plot.data=rbind(total,governance, freedom, privacy)


p<-ggplot(plot.data, aes(x=group, y=value, fill=group)) +  geom_boxplot()
p


```


### 2019 summary scores

> Filename: `RDR2019_02_Summary_Scores.csv`

#### Read in the 2019 summary scores
```{r}
RDR_Summary <- read.csv("c:/Users/gaby.walton/Desktop/CSV_Data/RDR2019_02_Summary_Scores.csv")
```


#### Companies: Calculate the Governance, Freedom of Expression, and Privacy scores from the indicator scores

```{r}
library(installr)
governance_score <- array(dim=133) ## creating array for totals to be stored
freedom_score <- array(dim=133) ## creating array for totals to be stored
privacy_score <- array(dim=133) ## creating array for totals to be stored


for(i in 1:133) {
  ## loop calculating governance
  z<-0
    governance_score[i] <- 0
  for(j in 9:14) {
    if(!is.na(RDR_Summary[i,j])) {
      governance_score[i] <- governance_score[i]+RDR_Summary[i,j]
      z<-z+1
    }
    
  }
  
    governance_score[i] <- governance_score[i]/z

  
    
    ## loop calculating freedom
  y<-0
    freedom_score[i] <- 0
  for(k in 15:25) {
    if(!is.na(RDR_Summary[i,k])) {
      freedom_score[i] <- freedom_score[i]+RDR_Summary[i,k]
      y<-y+1
    }
    
  }
  
    freedom_score[i] <- freedom_score[i]/y
    
     ## loop calculating privacy
  x<-0
    privacy_score[i] <- 0
  for(l in 26:43) {
    if(!is.na(RDR_Summary[i,l])) {
      privacy_score[i] <- privacy_score[i]+RDR_Summary[i,l]
      x<-x+1
    }
    
  }
  
    privacy_score[i] <- privacy_score[i]/x
  
}
```

  
  
     

#### Services: Calculate the Privacy scores for Cloud services

```{r}

privacy_cloud_array <- array(dim=0) ## creating array
w<-0

for(i in 1:133) {
    
if(RDR_Summary[i,3]=="Cloud"){ ## check if it's a cloud service
    x<-0 ##counter
    privacy_cloud_score <- 0
    for(l in 26:43) {
      if(!is.na(RDR_Summary[i,l])) {
      privacy_cloud_score <- privacy_cloud_score+RDR_Summary[i,l]
      x<-x+1
    }
    
  }
  
    privacy_cloud_score <- privacy_cloud_score/x
    privacy_cloud_array<-c(privacy_cloud_array,privacy_cloud_score)
    w<-w+1
}
}

print(privacy_cloud_array)

```


### 2019 Company Outcomes

> TBD
